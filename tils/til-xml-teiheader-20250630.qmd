---
title: "function to make a minimal valid teiHeader for a tei xml file"
author: "Sharon Howard"
date: "2025-06-30"
categories: [functions, xml, make xml, TEI]
slug: til-xml-teiheader-20250630
execute:
  warning: false
  message: false
---

## Includes

```{r}
source(here::here('R/shared.R'))
```

## Notes

-  will require xml2 


## Function

```{r} 
make_teiHeader <- function(data, doc_title="ATB"){ 
 
  date_stamp <- today() |> format('%Y-%m-%d') 
   
  # to add a comment 
  xml_add_child(tei_doc, xml_comment(" DO NOT EDIT THIS FILE: it's generated automatically from a script. ")) 
 
   
  xml_add_child(data, "teiHeader") 
   
  header_nodes <- xml_find_all(data, "//teiHeader") 
   
  xml_add_child(header_nodes, "fileDesc") 
   
  #  required in fileDesc: titleStmt, publicationStmt, sourceDesc 
  filedesc_nodes <- xml_find_all(data, "//teiHeader/fileDesc") 
  xml_add_child(filedesc_nodes, "titleStmt") 
  xml_add_child(filedesc_nodes, "publicationStmt") 
  xml_add_child(filedesc_nodes, "sourceDesc") 
   
  titlenodes <- xml_find_all(data, "//fileDesc/titleStmt") 
  xml_add_child(titlenodes, "title", doc_title) 
   
  #pub_info <- "..." 
  #src_info <- "sources: ...." 
  #encodesc_notes <- "..." 
   
  pubnodes <- xml_find_all(data, "//fileDesc/publicationStmt") 
  xml_add_child(pubnodes, "p", "...") 
   
  srcnodes <- xml_find_all(data, "//fileDesc/sourceDesc") 
  xml_add_child(srcnodes, "p", "...") 
   
  xml_add_child(header_nodes, "profileDesc") 
  profile_nodes <- xml_find_all(data, "//teiHeader/profileDesc") 
  xml_add_child(profile_nodes, "creation") 
   
  creation_nodes <- xml_find_all(data, "//profileDesc/creation") 
  xml_add_child(creation_nodes, "date") 
   
  xml_add_child(header_nodes, "encodingDesc") 
   
   
  encodesc_nodes <- xml_find_all(data, "//teiHeader/encodingDesc") 
  xml_add_child(encodesc_nodes, "p", '...') 
   
  # should make when attribute for date but cba right now 
  cd_nodes <- xml_find_all(data, "//profileDesc/creation/date") 
  xml_attr(cd_nodes, "when") <- date_stamp 
       
} 
 

```





```{r}
#| include: false
# atb/atb/people-places/people-standoff_241201.Rmd (and versions in various other files) 

```
